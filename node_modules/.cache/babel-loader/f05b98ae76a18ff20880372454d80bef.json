{"remainingRequest":"E:\\hbuilderworkspace\\realesateapp\\node_modules\\babel-loader\\lib\\index.js!E:\\hbuilderworkspace\\realesateapp\\node_modules\\@dcloudio\\vue-cli-plugin-uni\\packages\\webpack-preprocess-loader\\index.js??ref--12-2!E:\\hbuilderworkspace\\realesateapp\\node_modules\\@dcloudio\\vue-cli-plugin-uni\\packages\\webpack-preprocess-loader\\index.js??ref--16-0!E:\\hbuilderworkspace\\realesateapp\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\hbuilderworkspace\\realesateapp\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\hbuilderworkspace\\realesateapp\\node_modules\\@dcloudio\\vue-cli-plugin-uni\\packages\\webpack-scoped-loader\\index.js!E:\\hbuilderworkspace\\realesateapp\\src\\pages\\login\\login.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\hbuilderworkspace\\realesateapp\\src\\pages\\login\\login.vue","mtime":1546423103831},{"path":"E:\\hbuilderworkspace\\realesateapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\hbuilderworkspace\\realesateapp\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\hbuilderworkspace\\realesateapp\\node_modules\\@dcloudio\\vue-cli-plugin-uni\\packages\\webpack-preprocess-loader\\index.js","mtime":499162500000},{"path":"E:\\hbuilderworkspace\\realesateapp\\node_modules\\@dcloudio\\vue-cli-plugin-uni\\packages\\webpack-preprocess-loader\\index.js","mtime":499162500000},{"path":"E:\\hbuilderworkspace\\realesateapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\hbuilderworkspace\\realesateapp\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\hbuilderworkspace\\realesateapp\\node_modules\\@dcloudio\\vue-cli-plugin-uni\\packages\\webpack-scoped-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport service from '../../service.js';\nimport { mapState, mapMutations } from 'vuex';\nimport mInput from '../../components/m-input.vue';\nexport default {\n  components: {\n    mInput: mInput\n  },\n  data: function data() {\n    return {\n      providerList: [],\n      hasProvider: false,\n      account: '',\n      password: '',\n      positionTop: 0\n    };\n  },\n  computed: mapState(['forcedLogin']),\n  methods: _objectSpread({}, mapMutations(['login']), {\n    initProvider: function initProvider() {\n      var _this = this;\n\n      var filters = ['weixin', 'qq', 'sinaweibo'];\n      uni.getProvider({\n        service: 'oauth',\n        success: function success(res) {\n          if (res.provider && res.provider.length) {\n            for (var i = 0; i < res.provider.length; i++) {\n              if (~filters.indexOf(res.provider[i])) {\n                _this.providerList.push({\n                  value: res.provider[i],\n                  image: '../../static/img/' + res.provider[i] + '.png'\n                });\n              }\n            }\n\n            _this.hasProvider = true;\n          }\n        },\n        fail: function fail(err) {\n          console.error('获取服务供应商失败：' + JSON.stringify(err));\n        }\n      });\n    },\n    initPosition: function initPosition() {\n      /**\n       * 使用 absolute 定位，并且设置 bottom 值进行定位。软键盘弹出时，底部会因为窗口变化而被顶上来。\n       * 反向使用 top 进行定位，可以避免此问题。\n       */\n      this.positionTop = uni.getSystemInfoSync().windowHeight - 100;\n    },\n    bindLogin: function bindLogin() {\n      /**\n       * 客户端对账号信息进行一些必要的校验。\n       * 实际开发中，根据业务需要进行处理，这里仅做示例。\n       */\n      if (this.account.length < 5) {\n        uni.showToast({\n          icon: 'none',\n          title: '账号最短为 5 个字符'\n        });\n        return;\n      }\n\n      if (this.password.length < 6) {\n        uni.showToast({\n          icon: 'none',\n          title: '密码最短为 6 个字符'\n        });\n        return;\n      }\n      /**\n       * 下面简单模拟下服务端的处理\n       * 检测用户账号密码是否在已注册的用户列表中\n       * 实际开发中，使用 uni.request 将账号信息发送至服务端，客户端在回调函数中获取结果信息。\n       */\n\n\n      var data = {\n        account: this.account,\n        password: this.password\n      };\n      var validUser = service.getUsers().some(function (user) {\n        return data.account === user.account && data.password === user.password;\n      });\n\n      if (true) {\n        this.toMain(this.account);\n      } else {\n        uni.showToast({\n          icon: 'none',\n          title: '用户账号或密码不正确'\n        });\n      }\n    },\n    oauth: function oauth(value) {\n      var _this2 = this;\n\n      uni.login({\n        provider: value,\n        success: function success(res) {\n          uni.getUserInfo({\n            provider: value,\n            success: function success(infoRes) {\n              /**\n               * 实际开发中，获取用户信息后，需要将信息上报至服务端。\n               * 服务端可以用 userInfo.openId 作为用户的唯一标识新增或绑定用户信息。\n               */\n              _this2.toMain(infoRes.userInfo.nickName);\n            }\n          });\n        },\n        fail: function fail(err) {\n          console.error('授权登录失败：' + JSON.stringify(err));\n        }\n      });\n    },\n    toMain: function toMain(userName) {\n      this.login(userName);\n      /**\n       * 强制登录时使用reLaunch方式跳转过来\n       * 返回首页也使用reLaunch方式\n       */\n\n      if (this.forcedLogin) {\n        uni.reLaunch({\n          url: '../main/main'\n        });\n      } else {\n        uni.navigateBack();\n      }\n    }\n  }),\n  onLoad: function onLoad() {\n    this.initPosition();\n    this.initProvider();\n  }\n};",{"version":3,"sources":["login.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <view class=\"content\">\r\n        <mu-form>\r\n            <mu-flex class=\"flex-demo\" justify-content=\"center\" >\r\n\r\n            <mu-text-field v-model=\"account\" label=\"账号\" label-float help-text=\"用户名为6-12长度的字符\"\r\n                           icon=\"account_circle\"></mu-text-field>\r\n            </mu-flex>\r\n\r\n            <br/>\r\n            <mu-flex class=\"flex-demo\" justify-content=\"center\" >\r\n\r\n            <mu-text-field v-model=\"password\" label=\"密码\" label-float help-text=\"密码为6-12长度的字符\" icon=\"locked\"></mu-text-field>\r\n            <br/>\r\n            </mu-flex>\r\n\r\n            <!--<mu-form-item align=\"center\">-->\r\n            <!--</mu-form-item>-->\r\n            <mu-flex class=\"flex-demo\" justify-content=\"center\" >\r\n\r\n            <mu-button color=\"primary\" align=\"center\" @tap=\"bindLogin\" @click=\"bindLogin\">登陆</mu-button>\r\n\r\n                </mu-flex>\r\n        </mu-form>\r\n\r\n        <!--<view class=\"input-group\">-->\r\n            <!--<view class=\"input-row border\">-->\r\n                <!--<text class=\"title\">账号：</text>-->\r\n                <!--<m-input class=\"m-input\" type=\"text\" clearable focus v-model=\"account\" placeholder=\"请输入账号\"></m-input>-->\r\n            <!--</view>-->\r\n            <!--<view class=\"input-row\">-->\r\n                <!--<text class=\"title\">密码：</text>-->\r\n                <!--<m-input type=\"password\" displayable v-model=\"password\" placeholder=\"请输入密码\"></m-input>-->\r\n            <!--</view>-->\r\n        <!--</view>-->\r\n        <!--<view class=\"btn-row\">-->\r\n            <!--<button type=\"primary\" class=\"primary\" @tap=\"bindLogin\">登录</button>-->\r\n        <!--</view>-->\r\n        <!--<view class=\"action-row\">-->\r\n            <!--<navigator url=\"../reg/reg\">注册账号</navigator>-->\r\n            <!--<text>|</text>-->\r\n            <!--<navigator url=\"../pwd/pwd\">忘记密码</navigator>-->\r\n        <!--</view>-->\r\n        <!--<view class=\"oauth-row\" v-if=\"hasProvider\" v-bind:style=\"{top: positionTop + 'px'}\">-->\r\n            <!--<view class=\"oauth-image\" v-for=\"provider in providerList\" :key=\"provider.value\">-->\r\n                <!--<image :src=\"provider.image\" @tap=\"oauth(provider.value)\"></image>-->\r\n            <!--</view>-->\r\n        <!--</view>-->\r\n    </view>\r\n</template>\r\n\r\n<script>\r\n    import service from '../../service.js';\r\n    import {\r\n        mapState,\r\n        mapMutations\r\n    } from 'vuex'\r\n    import mInput from '../../components/m-input.vue'\r\n\r\n    export default {\r\n        components: {\r\n            mInput\r\n        },\r\n        data() {\r\n            return {\r\n                providerList: [],\r\n                hasProvider: false,\r\n                account: '',\r\n                password: '',\r\n                positionTop: 0\r\n            }\r\n        },\r\n        computed: mapState(['forcedLogin']),\r\n        methods: {\r\n            ...mapMutations(['login']),\r\n            initProvider() {\r\n                const filters = ['weixin', 'qq', 'sinaweibo'];\r\n                uni.getProvider({\r\n                    service: 'oauth',\r\n                    success: (res) => {\r\n                        if (res.provider && res.provider.length) {\r\n                            for (let i = 0; i < res.provider.length; i++) {\r\n                                if (~filters.indexOf(res.provider[i])) {\r\n                                    this.providerList.push({\r\n                                        value: res.provider[i],\r\n                                        image: '../../static/img/' + res.provider[i] + '.png'\r\n                                    });\r\n                                }\r\n                            }\r\n                            this.hasProvider = true;\r\n                        }\r\n                    },\r\n                    fail: (err) => {\r\n                        console.error('获取服务供应商失败：' + JSON.stringify(err));\r\n                    }\r\n                });\r\n            },\r\n            initPosition() {\r\n                /**\r\n                 * 使用 absolute 定位，并且设置 bottom 值进行定位。软键盘弹出时，底部会因为窗口变化而被顶上来。\r\n                 * 反向使用 top 进行定位，可以避免此问题。\r\n                 */\r\n                this.positionTop = uni.getSystemInfoSync().windowHeight - 100;\r\n            },\r\n            bindLogin() {\r\n                /**\r\n                 * 客户端对账号信息进行一些必要的校验。\r\n                 * 实际开发中，根据业务需要进行处理，这里仅做示例。\r\n                 */\r\n                if (this.account.length < 5) {\r\n                    uni.showToast({\r\n                        icon: 'none',\r\n                        title: '账号最短为 5 个字符'\r\n                    });\r\n                    return;\r\n                }\r\n                if (this.password.length < 6) {\r\n                    uni.showToast({\r\n                        icon: 'none',\r\n                        title: '密码最短为 6 个字符'\r\n                    });\r\n                    return;\r\n                }\r\n                /**\r\n                 * 下面简单模拟下服务端的处理\r\n                 * 检测用户账号密码是否在已注册的用户列表中\r\n                 * 实际开发中，使用 uni.request 将账号信息发送至服务端，客户端在回调函数中获取结果信息。\r\n                 */\r\n                const data = {\r\n                    account: this.account,\r\n                    password: this.password\r\n                };\r\n                const validUser = service.getUsers().some(function (user) {\r\n                    return data.account === user.account && data.password === user.password;\r\n                });\r\n                if (true) {\r\n                    this.toMain(this.account);\r\n                } else {\r\n                    uni.showToast({\r\n                        icon: 'none',\r\n                        title: '用户账号或密码不正确',\r\n                    });\r\n                }\r\n            },\r\n            oauth(value) {\r\n                uni.login({\r\n                    provider: value,\r\n                    success: (res) => {\r\n                        uni.getUserInfo({\r\n                            provider: value,\r\n                            success: (infoRes) => {\r\n                                /**\r\n                                 * 实际开发中，获取用户信息后，需要将信息上报至服务端。\r\n                                 * 服务端可以用 userInfo.openId 作为用户的唯一标识新增或绑定用户信息。\r\n                                 */\r\n                                this.toMain(infoRes.userInfo.nickName);\r\n                            }\r\n                        });\r\n                    },\r\n                    fail: (err) => {\r\n                        console.error('授权登录失败：' + JSON.stringify(err));\r\n                    }\r\n                });\r\n            },\r\n            toMain(userName) {\r\n                this.login(userName);\r\n                /**\r\n                 * 强制登录时使用reLaunch方式跳转过来\r\n                 * 返回首页也使用reLaunch方式\r\n                 */\r\n                if (this.forcedLogin) {\r\n                    uni.reLaunch({\r\n                        url: '../main/main',\r\n                    });\r\n                } else {\r\n                    uni.navigateBack();\r\n                }\r\n\r\n            }\r\n        },\r\n        onLoad() {\r\n            this.initPosition();\r\n            this.initProvider();\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .action-row {\r\n        display: flex;\r\n        flex-direction: row;\r\n        justify-content: center;\r\n    }\r\n\r\n    .action-row navigator {\r\n        color: #007aff;\r\n        padding: 0 20upx;\r\n    }\r\n\r\n    .oauth-row {\r\n        display: flex;\r\n        flex-direction: row;\r\n        justify-content: center;\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        width: 100%;\r\n    }\r\n\r\n    .oauth-image {\r\n        width: 100upx;\r\n        height: 100upx;\r\n        border: 1upx solid #dddddd;\r\n        border-radius: 100upx;\r\n        margin: 0 40upx;\r\n        background-color: #ffffff;\r\n    }\r\n\r\n    .oauth-image image {\r\n        width: 60upx;\r\n        height: 60upx;\r\n        margin: 20upx;\r\n    }\r\n</style>\r\n"],"sourceRoot":"src\\pages\\login"}]}